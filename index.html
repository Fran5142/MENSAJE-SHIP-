<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<title>SHIP DB</title>
<style>
  /* DiseÃ±o base */
  body {
    font-family: 'Poppins', sans-serif;
    background: #f4f8fb;
    color: #012a4a;
    margin: 0;
    padding: 10px;
  }

  h1 {
    text-align: center;
    color: #0f6fc6;
    font-size: 1.6em;
  }

  .contenedor {
    max-width: 900px;
    margin: 15px auto;
    background: #fff;
    border-radius: 10px;
    padding: 16px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  }

  .titulo {
    font-weight: 700;
    font-size: 17px;
    color: #0f6fc6;
    border-bottom: 2px solid #e0efff;
    padding-bottom: 4px;
    margin-top: 16px;
  }

  .fila {
    display: flex;
    gap: 10px;
    align-items: center;
    margin: 10px 0;
    flex-wrap: wrap;
  }

  .fila label {
    flex: 1 1 200px;
    font-weight: 600;
    font-size: 14px;
  }

  .fila input,
  .fila select {
    flex: 1 1 180px;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
    text-align: center;
    font-size: 14px;
    width: 100%;
  }

  .resultado {
    margin-top: 18px;
    background: #e8f3ff;
    padding: 12px;
    border-radius: 10px;
    font-size: 14px;
  }

  .codigo {
    font-family: monospace;
    font-size: 15px;
    color: #0f4a8a;
    word-break: break-word;
    white-space: pre-wrap;
  }

  .detalle {
    margin-top: 8px;
    font-size: 13px;
    color: #01335d;
  }

  .btns {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 15px;
  }

  .btn {
    background: #0f6fc6;
    color: #fff;
    border: 0;
    padding: 10px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    flex: 1 1 150px;
  }

  .btn.reiniciar {
    background: #f44336;
  }

  .btn:active {
    transform: translateY(1px);
  }

  /* ==============================
     ðŸ”¹ Estilos Responsivos
     ============================== */
  @media (max-width: 768px) {
    body {
      padding: 6px;
    }

    .contenedor {
      padding: 10px;
    }

    .fila {
      flex-direction: column;
      align-items: flex-start;
    }

    .fila label {
      width: 100%;
      margin-bottom: 5px;
      font-size: 15px;
    }

    .fila input,
    .fila select {
      width: 100%;
      font-size: 15px;
    }

    .btns {
      flex-direction: column;
    }

    .btn {
      width: 100%;
      text-align: center;
    }

    h1 {
      font-size: 1.4em;
    }
  }

 /* ===== Ajustes extra para mÃ³viles pequeÃ±os ===== */
@media (max-width: 380px) {
  .contenedor {
    padding: 8px;
  }

  .fila label {
    font-size: 13px;
  }

  .fila input,
  .fila select {
    font-size: 13px;
    padding: 6px;
  }

  h1 {
    font-size: 1.2em;
  }

  .btn {
    font-size: 13px;
    padding: 8px;
  }
}

/* Evita desbordes horizontales en mÃ³viles */
html, body {
  max-width: 100%;
  overflow-x: hidden;
}

</style>
</head>
<body>
<h1>SHIP DB</h1>

<div class="contenedor">
  <!-- Encabezado y datos bÃ¡sicos -->
  <div class="titulo">Encabezado SHIP</div>
  <div class="fila"><label>Inicio:</label><input id="sigla" value="BBXX" readonly></div>
  <div class="fila"><label>Sigla Buque:</label><input id="estacion" maxlength="4" placeholder="Ej: SCQQ" style="text-transform:uppercase"></div>
  <div class="fila"><label>DÃ­a (DD):</label><input id="dia" type="number" min="1" max="31"></div>
  <div class="fila"><label>Hora UTC (HH):</label><input id="hora" type="number" min="0" max="23"></div>
  <div class="fila"><label>Indicador de viento:</label>
    <select id="unidadViento">
      <option value="0">0 â€“ Viento estimado (m/s)</option>
      <option value="1">1 â€“ Viento anemÃ³metro (m/s)</option>
      <option value="3">3 â€“ Viento estimado (nudos)</option>
      <option value="4" selected>4 â€“ Viento anemÃ³metro (nudos)</option>
    </select>
  </div>

  <!-- Latitud y longitud -->
  <div class="titulo">Latitud</div>
  <div class="fila"><label>Grados:</label><input id="latGrados" type="number" min="0" max="90" placeholder="Ej: 33"></div>
  <div class="fila"><label>Minutos:</label><input id="latMinutos" type="number" min="0" max="59" placeholder="Ej: 44"></div>
  <div class="fila"><label>Latitud codificada (99XXX):</label><input id="latitud" readonly></div>

  <div class="titulo">Longitud</div>
<div class="fila">
  <label>Cuadrante:</label>
  <select id="cuadrante">
    <option value="1">1 â€“ Noreste</option>
    <option value="3">3 â€“ Sureste</option>
    <option value="5" selected>5 â€“ Surweste</option>
    <option value="7">7 â€“ Norweste</option>
  </select>
</div>
  <div class="fila"><label>Grados:</label><input id="lonGrados" type="number" min="0" max="180" placeholder="Ej: 85"></div>
  <div class="fila"><label>Minutos:</label><input id="lonMinutos" type="number" min="0" max="59" placeholder="Ej: 55"></div>
  <div class="fila"><label>Longitud codificada (50XXX):</label><input id="longitud" readonly></div>

  <!-- Grupo 4 i B V V -->
  <div class="titulo">Grupo Visibilidad</div>
  <div class="fila"><label>InclusiÃ³n / omisiÃ³n:</label>
    <select id="incluido">
      <option value="1">1 â€“ Incluido (Con FenÃ³menos)</option>
      <option value="2">2 â€“ Omitido (Sin FenÃ³menos)</option>
    </select>
  </div>
  <div class="fila"><label>Base nubosidad (1 dÃ­g):</label>
    <select id="baseNube">
      <option value="0">0.- 0 a 49 metros</option>
      <option value="1">1.- 50 a 99 metros</option>
      <option value="2">2.- 100 a 199 metros</option>
      <option value="3">3.- 200 a 299 metros</option>
      <option value="4">4.- 300 a 599 metros</option>
      <option value="5">5.- 600 a 999 metros</option>
      <option value="6">6.- 1000 a 1499 metros</option>
      <option value="7">7.- 1500 a 1999 metros</option>
      <option value="8">8.- 2000 a 2499 metros</option>
      <option value="9">9.- 2500 mts. o mÃ¡s, o sin nubes</option>
      <option value="/">/.- Altura de la base nubosa desconocida</option>
    </select>
  </div>
  <div class="fila"><label>Visibilidad (2 dÃ­gitos):</label>
    <select id="visibilidad">
      <option value="90">90.- menos de 50 mts</option>
      <option value="91">91.- 50 mts</option>
      <option value="92">92.- 200 mts</option>
      <option value="93">93.- 500 mts</option>
      <option value="94">94.- 1 km</option>
      <option value="95">95.- 2 km</option>
      <option value="96">96.- 4 km</option>
      <option value="97">97.- 10 km</option>
      <option value="98">98.- 20 km</option>
    </select>
  </div>

  <!-- NUEVA SECCIÃ“N 5: Octas, nubosidad total y Viento -->
  <div class="titulo">Grupo Octas, Nubosidad total y Viento</div>
  <div class="fila"><label>Octas total de nubes (0-8):</label><input id="vNubosidad" type="number" min="0" max="8" placeholder="Ej: 5"></div>
  <div class="fila"><label>DirecciÃ³n del viento:</label><input id="vDireccion" type="number" min="0" max="36" placeholder="Ej: 13"></div>
  <div class="fila"><label>Intensidad del viento:</label><input id="vIntensidad" type="number" min="0" max="99" placeholder="Ej: 12"></div>

  <!-- Temperaturas y humedad -->
  <div class="titulo">SecciÃ³n 1 y 2 â€” Temperaturas y humedad</div>
  <div class="fila"><label>Temperatura seca (Â°C):</label><input id="tempSeco" type="number" step="0.1" placeholder="Ej: 8.8"></div>
  <div class="fila"><label>Temperatura hÃºmeda (Â°C):</label><input id="tempHumedo" type="number" step="0.1" placeholder="Ej: 8.0"></div>
  <div class="fila"><label>Punto de rocÃ­o (Â°C):</label><input id="puntoRocio" readonly></div>
  <div class="fila"><label>Humedad relativa (%):</label><input id="humRel" readonly></div>

  <!-- SecciÃ³n 1 y 2 â€” PresiÃ³n y tendencia -->
  <div class="titulo">SecciÃ³n 3, 4 y 5 â€” PresiÃ³n y tendencia</div>
  <div class="fila"><label>PresiÃ³n estaciÃ³n (hPa):</label><input id="presEst" type="number" step="0.1"></div>
  <div class="fila"><label>PresiÃ³n nivel mar (hPa):</label><input id="presMar" type="number" step="0.1"></div>
  <div class="fila"><label>Tendencia (5a):</label>
    <select id="tendTipo"><option value="2">2</option><option value="4">4</option><option value="7">7</option></select>
  </div>
  <div class="fila"><label>Valor cambio presiÃ³n (hPa):</label><input id="tendValor" type="number" step="0.1"></div>

<!-- SecciÃ³n 7 â€” Tiempo Presente -->
<div class="titulo">SecciÃ³n 7 â€” Tiempo Presente</div>

<!-- Tiempo presente -->
<div class="fila">
  <label>Tiempo presente:</label>
  <select id="tiempoPresente">

    <optgroup label="00â€“03 | Estado general del cielo">
    <option value="00">00 â€“ Estado del cielo no observado</option>
    <option value="01">01 â€“ Nubes en disminuciÃ³n</option>
    <option value="02">02 â€“ Cielo sin cambios</option>
    <option value="03">03 â€“ Nubosidad en aumento</option>
    </optgroup>

    <optgroup label="04â€“10 | Bruma, humo, polvo o arena">
    <option value="04">04 â€“ Visibilidad reducida por humo/ceniza</option>
    <option value="05">05 â€“ Visibilidad reducida por bruma (>1km)</option>
    <option value="06">06 â€“ Polvo en suspensiÃ³n no levantado</option>
    <option value="07">07 â€“ Polvo/arena levantado sin torbellinos</option>
    <option value="08">08 â€“ Remolinos de polvo/arena sin tempestad</option>
    <option value="09">09 â€“ Tormenta de polvo o arena</option>
    <option value="10">10 â€“ Neblina (1-10 km)</option>
    </optgroup>


    <optgroup label="11â€“19 | Eventos sin precipitaciones">
    <option value="11">11 â€“ Niebla baja aislada (<1 km)</option>
    <option value="12">12 â€“ Niebla baja continua (<1 km)</option>
    <option value="13">13 â€“ RelÃ¡mpagos visibles</option>
    <option value="14">14 â€“ PrecipitaciÃ³n virga</option>
    <option value="15">15 â€“ PrecipitaciÃ³n a >5 km</option>
    <option value="16">16 â€“ PrecipitaciÃ³n cerca</option>
    <option value="17">17 â€“ Tormentas sin precipitaciÃ³n</option>
    <option value="18">18 â€“ Turbonadas visibles</option>
    <option value="19">19 â€“ Nubes embudo (tornado/tromba)</option>
    </optgroup>

    <optgroup label="20â€“29 | PrecipitaciÃ³n dentro de la hora pasada, pero no al momento de la observaciÃ³n">
    <option value="20">20 â€“ Llovizna no congelada</option>
    <option value="21">21 â€“ Lluvia no congelada</option>
    <option value="22">22 â€“ Nieve</option>
    <option value="23">23 â€“ Lluvia y nieve</option>
    <option value="24">24 â€“ Lloviznas/lluvia congelada</option>
    <option value="25">25 â€“ Chubasco de lluvia</option>
    <option value="26">26 â€“ Chubasco de nieve o lluvia+nieve</option>
    <option value="27">27 â€“ Chubasco de granizo pequeÃ±o o lluvia+granizo</option>
    <option value="28">28 â€“ Niebla o niebla helada</option>
    <option value="29">29 â€“ Tormenta con/sin precipitaciÃ³n</option>
    </optgroup>

    <optgroup label="30â€“39 | Tormenta de polvo , tormenta de arena o ventisca">
    <option value="30">30 â€“ Tempestad de polvo/arena dÃ©bil/moderada</option>
    <option value="31">31 â€“ Tempestad de polvo/arena sin cambio</option>
    <option value="32">32 â€“ Tempestad de polvo/arena aumentando</option>
    <option value="33">33 â€“ Tempestad fuerte disminuyendo</option>
    <option value="34">34 â€“ Tempestad fuerte sin cambio</option>
    <option value="35">35 â€“ Tempestad fuerte aumentando</option>
    <option value="36">36 â€“ Ventisca baja dÃ©bil/moderada</option>
    <option value="37">37 â€“ Ventisca baja fuerte</option>
    <option value="38">38 â€“ Ventisca alta dÃ©bil/moderada</option>
    <option value="39">39 â€“ Ventisca alta fuerte</option>
    </optgroup>


    <optgroup label="40â€“49 | Nieblas o nieblas congelantes">
    <option value="40">40 â€“ Niebla a distancia</option>
    <option value="41">41 â€“ Niebla aislada ha disminuido</option>
    <option value="42">42 â€“ Niebla cielo visible disminuyendo</option>
    <option value="43">43 â€“ Niebla cielo invisible disminuyendo</option>
    <option value="44">44 â€“ Niebla cielo visible sin cambio</option>
    <option value="45">45 â€“ Niebla cielo invisible sin cambio</option>
    <option value="46">46 â€“ Niebla cielo visible espesada</option>
    <option value="47">47 â€“ Niebla cielo invisible espesada</option>
    <option value="48">48 â€“ Niebla visible con escarcha</option>
    <option value="49">49 â€“ Niebla invisible con escarcha</option>
    </optgroup>

    <optgroup label="50â€“59 | Lloviznas">
    <option value="50">50 â€“ Llovizna dÃ©bil intermitente</option>
    <option value="51">51 â€“ Llovizna dÃ©bil continua</option>
    <option value="52">52 â€“ Llovizna moderada intermitente</option>
    <option value="53">53 â€“ Llovizna moderada continua</option>
    <option value="54">54 â€“ Llovizna fuerte intermitente</option>
    <option value="55">55 â€“ Llovizna fuerte continua</option>
    <option value="56">56 â€“ Llovizna dÃ©bil congelada</option>
    <option value="57">57 â€“ Llovizna moderada/fuerte congelada</option>
    <option value="58">58 â€“ Llovizna y lluvia dÃ©bil</option>
    <option value="59">59 â€“ Llovizna y lluvia moderada/fuerte</option>
    </optgroup>

    <optgroup label="60â€“69 | Lluvia">
    <option value="60">60 â€“ Lluvia dÃ©bil intermitente</option>
    <option value="61">61 â€“ Lluvia dÃ©bil continua</option>
    <option value="62">62 â€“ Lluvia moderada intermitente</option>
    <option value="63">63 â€“ Lluvia moderada continua</option>
    <option value="64">64 â€“ Lluvia fuerte intermitente</option>
    <option value="65">65 â€“ Lluvia fuerte continua</option>
    <option value="66">66 â€“ Lluvia dÃ©bil congelada</option>
    <option value="67">67 â€“ Lluvia moderada/fuerte congelada</option>
    <option value="68">68 â€“ Lluvia y nieve dÃ©bil</option>
    <option value="69">69 â€“ Lluvia y nieve moderada/fuerte</option>
    </optgroup>

    <optgroup label="70â€“79 | Nieve">
    <option value="70">70 â€“ Nieve dÃ©bil intermitente</option>
    <option value="71">71 â€“ Nieve dÃ©bil continua</option>
    <option value="72">72 â€“ Nieve moderada intermitente</option>
    <option value="73">73 â€“ Nieve moderada continua</option>
    <option value="74">74 â€“ Nieve densa intermitente</option>
    <option value="75">75 â€“ Nieve densa continua</option>
    <option value="76">76 â€“ Agujas de hielo</option>
    <option value="77">77 â€“ Nieve granulada</option>
    <option value="78">78 â€“ Cristales aislados de nieve</option>
    <option value="79">79 â€“ Cellisca o bolitas de hielo</option>
    </optgroup>


    <optgroup label="80â€“90 | Chubasco">
    <option value="80">80 â€“ Chubasco de lluvia dÃ©bil</option>
    <option value="81">81 â€“ Chubasco de lluvia moderada/fuerte</option>
    <option value="82">82 â€“ Chubasco violento de lluvia</option>
    <option value="83">83 â€“ Chubasco dÃ©biles de lluvia y nieve</option>
    <option value="84">84 â€“ Chubasco moderados/fuertes de lluvia y nieve</option>
    <option value="85">85 â€“ Chubasco dÃ©biles de nieve</option>
    <option value="86">86 â€“ Chubasco moderados/fuertes de nieve</option>
    <option value="87">87 â€“ Chubasco dÃ©biles de granizo pequeÃ±o o nieve granulada</option>
    <option value="88">88 â€“ Chubasco moderados/fuertes granizo pequeÃ±o o nieve granulada</option>
    <option value="89">89 â€“ Chubasco dÃ©biles granizo con lluvia o nieve</option>
    <option value="90">90 â€“ Chubasco moderados/fuertes granizo con lluvia o nieve</option>
    </optgroup>

    <optgroup label="91â€“99 | Tormenta">
    <option value="91">91 â€“ Lluvia dÃ©bil, tormenta elÃ©ctrica previa</option>
    <option value="92">92 â€“ Lluvia moderada/fuerte, tormenta elÃ©ctrica previa</option>
    <option value="93">93 â€“ Nieve o lluvia y nieve dÃ©biles, tormenta elÃ©ctrica previa</option>
    <option value="94">94 â€“ Nieve o lluvia y nieve moderados/fuertes, tormenta elÃ©ctrica previa</option>
    <option value="95">95 â€“ Tormenta elÃ©ctrica dÃ©bil/moderada sin granizo</option>
    <option value="96">96 â€“ Tormenta elÃ©ctrica dÃ©bil/moderada con granizo</option>
    <option value="97">97 â€“ Tormenta elÃ©ctrica fuerte sin granizo</option>
    <option value="98">98 â€“ Tormenta elÃ©ctrica + tempestad de polvo/arena</option>
    <option value="99">99 â€“ Tormenta elÃ©ctrica fuerte con granizo</option>
    </optgroup>

  </select>
</div>

<!-- Tiempo pasado 1 -->
<div class="fila">
  <label>Tiempo pasado 1:</label>
  <select id="tiempoPasado1">
    <option value="0">0 â€“ Despejado</option>
    <option value="1">1 â€“ Nubosidad menos de la mitad</option>
    <option value="2">2 â€“ Nubes cubriendo mÃ¡s de la mitad del cielo</option>
    <option value="3">3 â€“ Tempestad de polvo, Arena O ventisca</option>
    <option value="4">4 â€“ Niebla , niebla helada Bruma Espesa (Vis menor a 1 km)</option>
    <option value="5">5 â€“ Llovizna</option>
    <option value="6">6 â€“ Lluvia</option>
    <option value="7">7 â€“ Nieve o aguanieve</option>
    <option value="8">8 â€“ Chubascos</option>
    <option value="9">9 â€“ Tormenta ElÃ©ctrica con o sin precipitaciones</option>
    <!-- Puedes agregar mÃ¡s cÃ³digos -->
  </select>
</div>

<!-- Tiempo pasado 2 -->
<div class="fila">
  <label>Tiempo pasado 2:</label>
  <select id="tiempoPasado2">
    <option value="0">0 â€“ Despejado</option>
    <option value="1">1 â€“ Nubosidad menos de la mitad</option>
    <option value="2">2 â€“ Nubes cubriendo mÃ¡s de la mitad del cielo</option>
    <option value="3">3 â€“ Tempestad de polvo, Arena O ventisca</option>
    <option value="4">4 â€“ Niebla , niebla helada Bruma Espesa (Vis menor a 1 km)</option>
    <option value="5">5 â€“ Llovizna</option>
    <option value="6">6 â€“ Lluvia</option>
    <option value="7">7 â€“ Nieve o aguanieve</option>
    <option value="8">8 â€“ Chubascos</option>
    <option value="9">9 â€“ Tormenta ElÃ©ctrica con o sin precipitaciones</option>
    <!-- Puedes agregar mÃ¡s cÃ³digos -->
  </select>
</div>


<!-- SecciÃ³n 8 â€” Nubosidad -->
<div class="titulo">SecciÃ³n 8 â€” Nubosidad</div>
<div class="fila"><label>Nubosidad total (N):</label>
  <select id="nubN">
    <option value="0">0/8</option>
    <option value="1">1/8</option>
    <option value="2">2/8</option>
    <option value="3">3/8</option>
    <option value="4">4/8</option>
    <option value="5">5/8</option>
    <option value="6">6/8</option>
    <option value="7">7/8</option>
    <option value="8">8/8</option>
    <option value="9">9 Cielo oscurecido. Imposible de estimar, Invisible por niebla, polvo o ventisca </option>
    <option value="/">/ No se ha efectuado mediciÃ³n</option>
  </select>
</div>
<div class="fila">
  <label>Nubes bajas:</label>
  <select id="NubesBajas">
    <option value="0">0 â€“ Sin nubes bajas</option>
    <option value="1">1 â€“ CÃºmulos humilis o fractus sin desarrollo vertical </option>
    <option value="2">2 â€“ CÃºmulos congestus o mediocres con moderado desarrollo vertical</option>
    <option value="3">3 â€“ CÃºmulonimbus calvus sin yunque ni contorno definido</option>
    <option value="4">4 â€“ Stratocumulus cumulogenitus, Formado por dispersiÃ³n de Cu</option>
    <option value="5">5 â€“ Stratocumulus</option>
    <option value="6">6 â€“ Stratus nebulosos, Capa continua</option>
    <option value="7">7 â€“ Fractustratus o fractuscÃºmulus de Mal Tiempo</option>
    <option value="8">8 â€“ CÃºmulos y stratocÃºmulus con base a diferentes niveles</option>
    <option value="9">9 â€“ CÃºmulonimbus capillatus, forma de yunque</option>
    <option value="/">/ â€“ Nubes bajas invisibles por oscurecimiento u obstÃ¡culos (niebla, polvo o arena</option>
  </select>
</div>

<div class="fila">
  <label>Nubes medias:</label>
  <select id="NubesMedias">
    <option value="0">0 â€“ Sin nubes medias</option>
    <option value="1">1 â€“ Altostratus translÃºcidos</option>
    <option value="2">2 â€“ Altostratus opacus o nimbostratus</option>
    <option value="3">3 â€“ AltocÃºmulos translÃºcidos</option>
    <option value="4">4 â€“ AltocÃºmulos lenticulares, en bancos Y regulares o lenticulares</option>
    <option value="5">5 â€“ AltocÃºmulos translÃºcidos en bandas</option>
    <option value="6">6 â€“ AltocÃºmulos cÃºmulugenitus, formados por la extensiÃ³n de Cu o Cb</option>
    <option value="7">7 â€“ AltocÃºmulos translÃºcidos u opacus, Formado en varias capas </option>
    <option value="8">8 â€“ AltocÃºmulos floccus o castellatus</option>
    <option value="9">9 â€“ AltocÃºmulos en un cielo caÃ³tico</option>
    <option value="/">/ â€“ Nubes medias invisibles por oscurecimiento u obstÃ¡culos (nubes bajas,etc.)</option>
  </select>
</div>


<div class="fila">
  <label>Nubes altas:</label>
  <select id="NubesAltas">
    <option value="0">0 â€“ Sin nubes altas</option>
    <option value="1">1 â€“ Cirrus fibratus, tenue</option>
    <option value="2">2 â€“ Cirrus spissatus en bancos o franjas</option>
    <option value="3">3 â€“ Cirrus spissatus cumulonimbogenitus</option>
    <option value="4">4 â€“ Cirrus uncinus o filosus o ambos, extendiÃ©ndose gradualmente</option>
    <option value="5">5 â€“ Cirrus o cirroestratus en bandas invadiendo el cielo, menos de 45Âº sobre el horizonte</option>
    <option value="6">6 â€“ Cirrus o cirroestratus en bandas invadiendo el cielo, mÃ¡s de 45Âº sobre el horizonte</option>
    <option value="7">7 â€“ Cirrustratus cubriendo todo el cielo</option>
    <option value="8">8 â€“ Cirrustratus que no aumentan y no cubren todo el cielo</option>
    <option value="9">9 â€“ CirrucÃºmulos</option>
    <option value="/">/ â€“ Nubes altas invisibles por oscurecimiento o obstÃ¡culos (nubes medias o bajas)</option>
  </select>
</div>

  <!-- Grupo 222: Rumbo y velocidad -->
  <div class="titulo">Grupo 222 â€” Rumbo y Velocidad</div>
<div class="fila">
  <label>Rumbo verdadero:</label>
  <select id="rumbo1">
    <option value="0">0.â€“ Detenido</option>
    <option value="1">1.â€“ Noreste</option>
    <option value="2">2.â€“ Este</option>
    <option value="3">3.â€“ Sureste</option>
    <option value="4">4.â€“ Sur</option>
    <option value="5">5.â€“ Surweste</option>
    <option value="6">6.â€“ Weste</option>
    <option value="7">7.â€“ Norweste</option>
    <option value="8">8.â€“ Norte</option>
    <option value="9">9.â€“ Desconocido</option>
    <option value="/">/.â€“ Informe desde una estaciÃ³n costera o desplazamiento de la nave no reportado</option>
  </select>
</div>

<div class="fila">
  <label>Velocidad del buque:</label>
  <select id="velocidad">
    <option value="0">0.â€“ 0 Nudos / 0 Kms/Hra.</option>
    <option value="1">1.â€“ 1-5 Nudos / 1-10 Kms/Hra.</option>
    <option value="2">2.â€“ 6-10 Nudos / 11-19 Kms/Hra.</option>
    <option value="3">3.â€“ 11-15 Nudos / 20-28 Kms/Hra.</option>
    <option value="4">4.â€“ 16-20 Nudos / 29-37 Kms/Hra.</option>
    <option value="5">5.â€“ 21-25 Nudos / 38-47 Kms/Hra.</option>
    <option value="6">6.â€“ 26-30 Nudos / 48-56 Kms/Hra.</option>
    <option value="7">7.â€“ 31-35 Nudos / 57-65 Kms/Hra.</option>
    <option value="8">8.â€“ 36-40 Nudos / 66-75 Kms/Hra.</option>
    <option value="9">9.â€“ Sobre 40 Nudos / sobre 75 Kms/Hra.</option>
    <option value="/">/.â€“ Informe desde una estaciÃ³n costera o desplazamiento del buque no reportado</option>
  </select>
</div>

<!-- NUEVO GRUPO 2 â€” Olas de mar de viento -->
<div class="titulo">Grupo 2 â€” Olas de mar de viento</div>
<div class="fila">
  <label>Indicativo de grupo:</label>
  <input id="indicativo2" value="2" readonly>
</div>
<div class="fila">
  <label>PerÃ­odo de las olas PwPw (s):</label>
  <input id="olasPeriodo" placeholder="Ej: 06" maxlength="2">
</div>
<div class="fila">
  <label>Altura de las olas HwHw (0,5 mts):</label>
  <select id="olasAltura">
    <option value="//">//.- No observado</option>
    <option value="01">01.- 0,5 m</option>
    <option value="02">02.- 1,0 m</option>
    <option value="03">03.- 1,5 m</option>
    <option value="04">04.- 2,0 m</option>
    <option value="05">05.- 2,5 m</option>
    <option value="06">06.- 3,0 m</option>
    <option value="07">07.- 3,5 m</option>
    <option value="08">08.- 4,0 m</option>
    <option value="09">09.- 4,5 m</option>
    <option value="10">10.- 5,0 m</option>
    <option value="00">Mar calma</option>
    <option value="299//">Imposible de medir</option>
  </select>
</div>
<div class="detalle">
  Nota 1: Este dato indica olas de mar de viento.<br>
  Nota 2: 20000 = Mar calma Â· 299// = Imposible de medir Â· 2//// = No fue observado
</div>

  <!-- BOTONES -->
  <div class="btns">
    <button class="btn" id="guardarBtn">Guardar registro</button>
    <button class="btn reiniciar" id="reiniciarBtn">Reiniciar historial</button>
  </div>

  <!-- RESULTADO -->
  <div class="resultado">
    <div class="codigo" id="codigo"></div>
    <div class="detalle" id="detalle"></div>
  </div>

  <!-- HISTORIAL -->
  <div class="titulo">Historial</div>
  <div id="historial"></div>
</div>

<script>
function $(id){ return document.getElementById(id); }

// actualizar lat/lon codificadas
function actualizarLatitud(){
  const g = Number($('latGrados').value) || 0;
  const m = Number($('latMinutos').value) || 0;
  const dec = Math.floor(m/6);
  $('latitud').value = '99' + String(g*10 + dec).padStart(3,'0');
}
function actualizarLongitud(){
  const c = String($('cuadrante').value || '5');
  const g = Number($('lonGrados').value) || 0;
  const m = Number($('lonMinutos').value) || 0;
  const dec = Math.floor(m/6);
  $('longitud').value = c + '0' + String(g*10 + dec).padStart(3,'0');
}

// cÃ¡lculo punto de rocÃ­o y humedad relativa
function calcularPuntoRocio() {
  const T = parseFloat($('tempSeco').value);
  const Tw = parseFloat($('tempHumedo').value);
  if (!Number.isFinite(T) || !Number.isFinite(Tw)) {
    $('puntoRocio').value = '';
    $('humRel').value = '';
    return { Td: null, HR: null };
  }
  const P = 1013.25;
  const A = 0.00066;
  const es_Tw = 6.112 * Math.exp((17.67 * Tw) / (Tw + 243.5));
  const e = es_Tw - A * P * (T - Tw);
  const es_T = 6.112 * Math.exp((17.67 * T) / (T + 243.5));
  const HR = Math.round(100 * (e / es_T));
  const Td = (243.5 * Math.log(e / 6.112)) / (17.67 - Math.log(e / 6.112));
  $('puntoRocio').value = Td.toFixed(1);
  $('humRel').value = HR;
  return { Td: Td, HR: HR };
}

// generar grupo 4 i B V V
function generarGrupo4nav(){
  const S = '4';
  const I = String($('incluido').value || '1');
  const B = String($('baseNube').value || '0').slice(-1);
  const VV = String($('visibilidad').value || '00').padStart(2,'0').slice(-2);
  return S + I + B + VV;
}

// generar Grupo 2 â€” Olas de mar de viento
function generarGrupo2(){
  const ind=$('indicativo2').value||'2';
  const per=$('olasPeriodo').value.padStart(2,'0')||'//';
  const alt=$('olasAltura').value||'//';
  return ind+per+alt;
}

// generar cÃ³digo completo
function generarCodigo(){
  const sigla = $('sigla').value || 'BBXX';
  const est = ($('estacion').value || '').toUpperCase();
  if (!est || est.length !== 4) {
    $('codigo').textContent = 'Ingrese estaciÃ³n vÃ¡lida (4 letras), ej: SCQQ';
    $('detalle').textContent = '';
    return '';
  }
  const dia = String(Number($('dia').value || 0)).padStart(2,'0');
  const hora = String(Number($('hora').value || 0)).padStart(2,'0');
  const i_w = $('unidadViento').value || '4';
  const YYGGiw = dia + hora + i_w;

  const lat = $('latitud').value;
  const lon = $('longitud').value;
  if (!lat || !lon) {
    $('codigo').textContent = 'Introduce latitud y longitud vÃ¡lidas';
    $('detalle').textContent = '';
    return '';
  }

  const tdhr = calcularPuntoRocio();
  const Td = (tdhr.Td !== null) ? tdhr.Td : 0;
  const temp = Number($('tempSeco').value) || 0;

  // SecciÃ³n 5: Nubosidad y viento
  const nubTotal = String($('vNubosidad').value || '0');
  const dirViento = String($('vDireccion').value || '00').padStart(2,'0');
  const intViento = String($('vIntensidad').value || '00').padStart(2,'0');
  const g5v = nubTotal + dirViento + intViento;

  const g1 = '1' + (temp < 0 ? '1' : '0') + String(Math.round(Math.abs(temp) * 10)).padStart(3,'0');
  const g2 = '2' + (Td < 0 ? '1' : '0') + String(Math.round(Math.abs(Td) * 10)).padStart(3,'0');

  const presEst = Number($('presEst').value) || 0;
  const presMar = Number($('presMar').value) || 0;
  const g3 = '3' + String(Math.round(presEst * 10)).padStart(4,'0').slice(-4);
  const g4 = '4' + String(Math.round(presMar * 10)).padStart(4,'0').slice(-4);

  const tendTipo = $('tendTipo').value || '4';
  const tendValor = Number($('tendValor').value) || 0;
  const g5 = '5' + tendTipo + String(Math.round(Math.abs(tendValor) * 10)).padStart(3,'0');

  const grupo4nav = generarGrupo4nav();

  // SecciÃ³n 7
  const ww = $('tiempoPresente').value || '00';
  const W1 = String($('tiempoPasado1').value || '0');
  const W2 = String($('tiempoPasado2').value || '0');
  const g7 = '7' + ww + W1 + W2;

// SecciÃ³n 8 â€” Nubosidad
const N = String($('nubN').value || '0');
const CL = String($('NubesBajas').value || '0');
const CM = String($('NubesMedias').value || '0');
const CH = String($('NubesAltas').value || '0');
const g8 = '8' + N + CL + CM + CH;

// Grupo 222 â€” Rumbo y velocidad
const rumbo = $('rumbo1').value || '0';
const vel = $('velocidad').value || '0';
const g222 = '222' + rumbo + vel;

const g2Olas = generarGrupo2();

  const codigoCompleto = [
      sigla, est, YYGGiw, lat, lon, grupo4nav,
      g5v, g1, g2, g3, g4, g5, g7, g8, g222, g2Olas
  ].join(' ');

  $('codigo').textContent = codigoCompleto;
  $('detalle').textContent = (tdhr.Td !== null) ? `Punto de rocÃ­o: ${tdhr.Td.toFixed(1)} Â°C Â· Humedad relativa: ${tdhr.HR}%` : '';

  return codigoCompleto;
}

// listeners para inputs
const autoIds = [
  'latGrados','latMinutos','lonGrados','lonMinutos','cuadrante',
  'tempSeco','tempHumedo','presEst','presMar','tendValor',
  'dia','hora','estacion','unidadViento','tendTipo','tiempoPresente',
  'tiempoPasado1','tiempoPasado2','nubN','NubesBajas','NubesMedias','NubesAltas',
  'incluido','baseNube','visibilidad','vNubosidad','vDireccion','vIntensidad',
  'olasPeriodo','olasAltura'
];
autoIds.forEach(id => {
  const el = $(id);
  if (!el) return;
  el.addEventListener('input', () => {
    if(['latGrados','latMinutos'].includes(id)) actualizarLatitud();
    if(['lonGrados','lonMinutos','cuadrante'].includes(id)) actualizarLongitud();
    if(['tempSeco','tempHumedo'].includes(id)) calcularPuntoRocio();
    generarCodigo();
  });
});

// Guardar observaciÃ³n
$('guardarBtn').addEventListener('click',()=>{
  const codigo=generarCodigo();
  let hist=JSON.parse(localStorage.getItem('historialSHIP'))||[];
  hist.unshift({codigo,fecha:new Date().toLocaleString()});
  localStorage.setItem('historialSHIP',JSON.stringify(hist));
  mostrarHistorial();
});

$('reiniciarBtn').addEventListener('click',()=>{
  if(confirm('Â¿Deseas borrar todo el historial y reiniciar el formulario?')){
    localStorage.removeItem('historialSHIP');
    document.querySelectorAll('input,select').forEach(el=>{
      if(!el.readOnly) el.value='';
    });
    $('sigla').value='BBXX';
    $('indicativo2').value='2';
    $('codigo').textContent='';
    $('detalle').textContent='';
    $('historial').innerHTML='';
    alert('Historial borrado correctamente.');
  }
});


// Mostrar historial
function mostrarHistorial(){
  const hist=JSON.parse(localStorage.getItem('historialSHIP'))||[];
  $('historial').innerHTML='';
  hist.forEach(h=>{
    const div=document.createElement('div');
    div.style.marginBottom='10px';
    div.innerHTML=`<b>${h.fecha}</b><br><span class="codigo">${h.codigo}</span>`;
    $('historial').appendChild(div);
  });
}

// generar cÃ³digo inicial al cargar
window.addEventListener('load',()=>{
  generarCodigo();
  mostrarHistorial();
});
</script>
</body>
</html>
